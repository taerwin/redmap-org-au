
from django.contrib.gis.geos import Point, Polygon

region_polygons = {
    "Tasmania": Polygon(((141.9509842435199,-43.48355127390608), (147.0158429295712,-44.88135409569165), (150.7146233887154,-44.24412224317301), (150.9049959105599,-40.48660735682775), (148.9910524123078,-39.30271798355914), (142.3837012007776,-39.35990228822149), (141.9509842435199,-43.48355127390608))),
    "New South Wales": Polygon(((149.6510187328861,-39.33284222173442), (156.6447797975237,-39.5413110018877), (159.4980333071544,-27.09125952600292), (141.0655124305001,-29.16733244809674), (141.1320928654111,-34.06243822399932), (149.746172553171,-37.47278600141384), (149.6510187328861,-39.33284222173442))),
    "Western Australia": Polygon(((129.1301644985577,-15.04063693280441), (128.4500714588889,-12.90413227570088), (121.4928303942802,-12.17482067443013), (110.2718695145673,-21.36547558382702), (108.9736667824489,-34.28968215098432), (116.1471228637673,-40.00251657168517), (129.5866527753336,-37.20388013389088), (128.9531480324681,-31.79266577045803), (129.1301644985577,-15.04063693280441))),
    "Victoria": Polygon(((141.0534847571628,-34.14430776342346), (141.0544273179301,-39.33226144118233), (148.8616529485754,-39.46564263311937), (149.5687044103001,-39.30967263464959), (149.6841943465396,-37.51725198108272), (141.0534847571628,-34.14430776342346))),
    "South Australia": Polygon(((129.6315930938666,-37.23429115008388), (140.93384257679,-39.32729354152659), (140.8098409997071,-26.26951514986825), (129.161587340565,-26.30921632490599), (129.6315930938666,-37.23429115008388))),
    "Northern Territory": Polygon(((138.1236108545581,-10.2516925663555), (127.9977731065961,-9.0645241337951), (128.9118274580214,-26.14341734492546), (138.0283716212627,-26.03988222620065), (138.1236108545581,-10.2516925663555))),
    "Queensland": Polygon(((138.0345474282234,-26.08713861405066), (141.0001993573809,-26.16533362790543), (141.1049469687183,-29.04820288487291), (153.521736679225,-28.28907377918563), (158.0644917925188,-25.43935957006736), (145.6076768183317,-9.495249291650364), (139.8501220318818,-10.02615982575578), (138.0278356628233,-16.80981979704593), (138.0345474282234,-26.08713861405066)))
}


def point_in_poly(point, poly):
    return point.within(poly)


def find_region(latitude, longitude):
    point = Point(longitude, latitude)  # feels backwards but works
    for name, poly in region_polygons.iteritems():
        if point.within(poly):
            return name
    return None
